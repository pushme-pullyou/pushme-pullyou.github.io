<!doctype html>
<html lang = "en" >
<head>
<meta charset = "utf-8" >
<meta name = "viewport" content= "width=device-width, initial-scale=1">
<meta name = "description" content = "View info regarding gbXML files" >
<meta name = "keywords" content = "gbXML,JavaScript,Markdown,GitHub,FOSS,3D,STEM" >
<meta name = "date" content = "2017-10-17" >
<title>Hamburger Menu</title>

<style>
/* Copyright 2017 Ladybug Tools authors. MIT License */

/* https://www.w3schools.com/colors/colors_names.asp // use colors and borders to help identify the scope of particular elements */

	html { --mnu-color: MediumSlateBlue; --mnu-back-color: ivory; --mnu-width: 350px; height: 100%; }

	body, html { font: 12pt monospace; height: 100%; margin: 0; }

	a { color: crimson; }

	blockquote, pre { background-color: #eee; padding: 10px; }
	button, input[type=button] { background-color: #ddd; border: none; color: var( --mnu-color ); cursor: pointer;padding: 3px 20px; }
	button:hover { background-color: #ccc; color: #fff }

	.sidenav { background-color: ivory; height: 100%; width: 250px; position: fixed; z-index: 1; top: 0; left: 0; overflow-x: hidden;
		transition: 0.5s; padding-top: 60px; }
/*
	.sidenav a { padding: 8px 8px 8px 32px; text-decoration: none; font-size: 25px; color: #818181; display: block; transition: 0.3s; }
	.sidenav a:hover  a:focus{ color: #f1f1f1; }
*/

	#hamburger { background-color: #edd; cursor:pointer; font-size:30px; left: 250px; line-height: 30px; margin: 0; padding: 5px 15px 8px 10px;
		position: absolute; top: 20px; transition: left .5s; z-index: 1; }

	#divContents { left: 0; position: absolute; margin: 0 auto; max-width: 800px; right: 0;}

	#divMenu { padding: 8px; }

	#divContainer { height: 100%; margin-left: 300px; transition: margin-left .5s; padding: 16px; position: relative; }

	@media screen and (max-height: 450px) { .sidenav {padding-top: 15px;} .sidenav a {font-size: 18px;} }

</style>
</head>
<body>
<script src = "https://cdn.rawgit.com/showdownjs/showdown/master/dist/showdown.min.js" ></script>


	<div id="divMenu" class="sidenav">

		<p id = "divBreadcrumbs" ><a href="../../index.html" title='' target="_top">pushMe pullYou</a> &raquo; <a href="../../index.html" target="_Top" >tooToo</a> &raquo; </p>

		<div id = "divTitle" title='' ></div>

		<p>typical menu items </p>
		<p>Click the pencil icon to edit the file on GitHub</p>
		<p>Reads Markdown files</p>
		<p>Supports location hash</p>
		<p>Obtains filenames and files via GitHub API</p>
		<p>Needs hamburger menu</p>

		<div id = "divItems" ></div>

		<hr>

		<div id = "divFooter" ></div>

	</div>

	<div id = "divContainer" >

		<div id=divContents ></div>

	</div>

	<div id="main" >

<!--
	<div id=contentsccc >

		<h2 ><a href='' >Hamburger Slide Menu Example</a></h2>

		<p>Click on the element to open the side navigation menu, and push this content to the right.</p>

		<p><a href=https://www.w3schools.com/howto/howto_js_off-canvas.asp>w3schools > off-canvas</a></p>

	</div>
-->
</div>

<div id="hamburger" onclick=toggleNav(); >
	&#9776; slide
</div>

<script>

//	const infoURI = 'https://github.com/pushme-pullyou.github.io/tootoo-templates/menu-for-markdown/' + fileName;

//	const urlGitHubMenu = 'https://api.github.com/repos/GreenBuildingXML/Sample-gbXML-Files/contents/';
//	const urlGitHubMenu = 'https://api.github.com/repositories/101335968/contents/sandbox/gbxml-guide';
//	const urlGitHubMenu = 'https://api.github.com/repos/ladybug-tools/spider/contents/sandbox/gbxml-guide';

	const urlGitHubMenu = 'https://api.github.com/repos/pushme-pullyou/pushme-pullyou.github.io/contents/tootoo-templates';
//	const urlGitHubFooter = 'https://api.github.com/repos/ladybug-tools/spider/contents/pages';


	const urlGitHubFooter = 'https://api.github.com/repos/pushme-pullyou/pushme-pullyou.github.io/contents/pages';


	const pathArry  = location.pathname.split( '/' ).slice( -2 );
	const release = pathArry[ 0 ]
	const fileName = pathArry[ 1 ];

	const infoURI = 'https://github.com/pushme-pullyou.github.io/tootoo-templates/menu-for-markdown/' + fileName;
	const infoIcon = '<img src="https://status.github.com/images/invertocat.png" height=18 > </a>';


// https://www.w3schools.com/howto/howto_js_off-canvas.asp

	init();

	function init() {

		divTitle.innerHTML = 
			'<h3>' +
				'<a  href = "" >' + document.title + '</a> &nbsp; ' +
				'<a href=' + infoURI + ' target="_top" >' + infoIcon + '</a>' +
			'</h3>' +
		'';

		window.addEventListener ( 'hashchange', onHashChange, false );

		requestFile( urlGitHubMenu, callbackGitHubMenu );

		requestFile( urlGitHubFooter, callbackGitHubFooter );

		onHashChange();

	}



	function onHashChange() {

		const url = !location.hash ? '../README.md' : location.hash.slice( 1 );

		requestFile( url, callbackMarkdown );

	}



	function requestFile( url, callback ) {

		const xhr = new XMLHttpRequest();
		xhr.crossOrigin = 'anonymous';
		xhr.open( 'GET', url, true );
		xhr.onerror = function( xhr ) { console.log( 'error:', xhr  ); };
//		xhr.onprogress = function( xhr ) { console.log(  'bytes loaded: ' + xhr.loaded.toLocaleString() ) }; /// or something
		xhr.onload = callback;
		xhr.send( null );

	}



	function callbackGitHubMenu( xhr ) {

		let response, files, txt;

		response = xhr.target.response;

		files = JSON.parse( response );
console.log( 'files', files );

		txt = '';

		for ( let i = 0; i < files.length; i++ ) {

			file = files[ i ];
//console.log( 'file', file );

//			if ( file.name === 'README.md' || !file.name.endsWith( '.md' ) ) { continue; }

			txt += '<div>' +
				'<a href=#' + file.download_url + 
				' title="' + file.size.toLocaleString() + ' bytes"  >' + 
				file.name + '</a> ' +
				'<a href=https://github.com/ladybug-tools/spider/blob/master/sandbox/gbxml-guide/' + file.name + 
				' title="Edit me" > &#x1f589;</a>' +
			'</div>';

		}

		divItems.innerHTML = txt;

	}



	function callbackGitHubFooter( xhr ) {

		let response, files, txt;

		response = xhr.target.response;

		files = JSON.parse( response );
//console.log( 'files', files );

		txt = '';

		for ( let i = 0; i < files.length; i++ ) {

			const file = files[ i ];
//console.log( 'file', file );

			if ( file.name === 'README.md' || !file.name.endsWith( '.md' ) ) { continue; }

			txt += '<div>' +
				'<a href=#' + file.download_url + 
				' title="' + file.size.toLocaleString() + ' bytes"  >' + 
				file.name + '</a>' +
				'<a href=https://github.com/ladybug-tools/spider/tree/master/pages/' + file.name + 
				' title="Edit me" > &#x1f589;</a>' +
			'<div>';

		}

		divFooter.innerHTML = txt;

	}



	function callbackMarkdown( xhr ){

		const converter = new showdown.Converter();
		const response = xhr.target.response;
		const html = converter.makeHtml( xhr.target.responseText );

		divContents.innerHTML = html;
//		main.innerHTML = html;
		window.scrollTo( 0, 0 );

	}


	function toggleNav() {

		if ( !divMenu.style.width || divMenu.style.width === '250px' ) {

			divMenu.style.width = '0';
			hamburger.style.left = '0';
			divContainer.style.marginLeft = '0';

		} else {

			divMenu.style.width = '250px';
			hamburger.style.left = '250px';
			divContainer.style.marginLeft = '250px';

		}

	}

</script>
</body>
</html>